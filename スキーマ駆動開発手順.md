# 第1章：はじめに

## スキーマ駆動開発とは

スキーマ駆動開発（Schema-Driven Development, SDD）は、APIの設計を中心に据えた開発手法であり、システム全体の仕様を明確に定義することから始まります。

このアプローチでは、OpenAPI仕様などのスキーマ定義を「唯一の信頼できる情報源」として扱い、バックエンドとフロントエンドの開発を並行して進めることが可能です。

スキーマ駆動開発の主なメリットには以下が含まれます：

- **コミュニケーションの円滑化**：スキーマが共通言語となり、開発者間やステークホルダーとの認識の齟齬を減少させます。

- **開発の並行化と効率化**：モックサーバーやコード生成ツールを活用することで、バックエンドの実装を待たずにフロントエンドの開発を進められます。

- **品質と保守性の向上**：スキーマに基づく自動テストやコード生成により、品質の維持と保守性の向上が期待できます。

本書では、Goをバックエンドに、ReactとTypeScriptをフロントエンドに使用するプロジェクトにおいて、OpenAPIを用いたスキーマ駆動開発の実践的な手順を解説します。

## 本書の目的と対象読者

本書の目的は、スキーマ駆動開発の導入から実践までの流れを体系的に理解し、実際のプロジェクトに適用できる知識と技術を提供することです。

対象読者は以下の方々です：

- スキーマ駆動開発を導入したいと考えている開発チームのメンバー

- Go、React、TypeScriptを使用した開発経験がある方

- API設計やOpenAPI仕様に関心がある方

本書を通じて、スキーマ駆動開発のメリットを最大限に活用し、効率的で高品質なソフトウェア開発を実現するための知識を習得できます。

---

# 第2章：OpenAPIスキーマの設計

## OpenAPI仕様の基本

OpenAPI（旧Swagger）は、RESTful APIの仕様を記述するための標準フォーマットであり、APIの構造や動作を明確に定義することができます。

OpenAPI仕様は主に以下の要素で構成されます：

- **openapi**：仕様のバージョンを指定します。

- **info**：APIのメタ情報（タイトル、バージョン、説明など）を記述します。

- **servers**：APIのサーバー情報を定義します。

- **paths**：APIの各エンドポイントとその操作（GET、POSTなど）を定義します。

- **components**：再利用可能なスキーマ、セキュリティスキーム、レスポンスなどを定義します。

OpenAPI仕様を用いることで、APIの設計が明確になり、ドキュメントの自動生成やコードの自動生成が可能となります。

## スキーマの構造とベストプラクティス

OpenAPI仕様では、APIのリクエストとレスポンスのデータ構造を「スキーマ」として定義します。

スキーマを設計する際のベストプラクティスは以下の通りです：

- **再利用性の確保**：共通のデータ構造は`components/schemas`に定義し、`$ref`を用いて参照することで冗長な記述を避けます。

- **明確な型定義**：各フィールドの型（string、integer、booleanなど）を明確に定義し、`required`フィールドを適切に設定します。

- **制約の適用**：`minLength`、`maxLength`、`pattern`などの制約を用いて、データの整合性を確保します。

- **例の提供**：`example`フィールドを用いて、具体的なデータ例を提供し、理解を助けます。

これらのベストプラクティスを遵守することで、APIの仕様が明確になり、開発者間での認識の齟齬を減少させることができます。

## コンポーネントの再利用とモジュール化

OpenAPI仕様では、`components`セクションを用いて再利用可能な部品を定義することができます。

主なコンポーネントには以下があります：

- **schemas**：データ構造を定義します。

- **responses**：レスポンスの内容を定義します。

- **parameters**：リクエストパラメータを定義します。

- **examples**：リクエストやレスポンスの例を定義します。

- **requestBodies**：リクエストボディの内容を定義します。

- **headers**：HTTPヘッダーの内容を定義します。

- **securitySchemes**：セキュリティスキームを定義します。

- **links**：レスポンスと他のエンドポイントとの関連を定義します。

- **callbacks**：非同期のコールバックを定義します。

これらのコンポーネントを適切に定義し、`$ref`を用いて参照することで、API仕様の再利用性と保守性を向上させることができます。

